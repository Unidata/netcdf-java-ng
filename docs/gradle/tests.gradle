//apply from: "$rootDir/gradle/any/testing.gradle"
apply plugin: 'java'

dependencies {
  testImplementation platform(project(':netcdf-java-testing-platform'))

  testImplementation project(':cdm-core')
  testImplementation project(':cdm-s3')
  testImplementation project(':netcdf4')
  testImplementation project(':cdm-test-utils')

  testImplementation(libs.slf4j)
  testImplementation(libs.junit)
  testImplementation(libs.truth)

  testRuntimeOnly(libs.logbackClassic)
}

/////////////////////
// Userguide Tests //
/////////////////////

sourceSets {
  test.java.srcDirs = ['userguide/src/test/java']
  test.resources.srcDirs = ['userguide/src/test/resources']
}

java {
  sourceCompatibility = JavaVersion.VERSION_11
  targetCompatibility = JavaVersion.VERSION_11
}

// Will apply to "compileJava", "compileTestJava", "compileSourceSetJava", etc.
tasks.withType(JavaCompile).all {
  options.encoding = 'UTF-8'

  // show deprecation details
  options.compilerArgs = ['-Xlint:deprecation']
}

test {
  systemProperty("jna.library.path", System.getProperty("jna.library.path"))
}
